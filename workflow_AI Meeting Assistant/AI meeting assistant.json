{
  "name": "AI meeting assistant",
  "nodes": [
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyHour"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "[DELETED_FOLDER_ID]",
          "mode": "list",
          "cachedResultName": "Recorded",
          "cachedResultUrl": "[DELETED_URL]"
        },
        "event": "fileCreated",
        "options": {}
      },
      "alwaysOutputData": false,
      "executeOnce": false
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "options": {}
      }
    },
    {
      "parameters": {
        "options": {}
      }
    },
    {
      "parameters": {
        "name": "={{ $now.setZone('Asia/Seoul').toFormat('yyyy-MM-dd') }}.srt",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "[DELETED_FOLDER_ID]",
          "mode": "list",
          "cachedResultName": "회의록 input",
          "cachedResultUrl": "[DELETED_URL]"
        },
        "options": {}
      }
    },
    {
      "parameters": {
        "options": {}
      }
    },
    {
      "parameters": {
        "operation": "toText",
        "sourceProperty": "output",
        "options": {
          "fileName": "={{ $now.setZone('Asia/Seoul').toFormat('yyyy-MM-dd') }}_회의록.md"
        }
      }
    },
    {
      "parameters": {
        "name": "={{ $now.toFormat('yyyy-MM-dd') }}_회의록",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "[DELETED_URL]"
        },
        "folderId": {
          "__rl": true,
          "value": "[DELETED_FOLDER_ID]",
          "mode": "list",
          "cachedResultName": "회의록 output",
          "cachedResultUrl": "[DELETED_URL]"
        },
        "options": {}
      }
    },
    {
      "parameters": {
        "content": "Google Drive에 음성 파일 업로드\n\n1. 휴대폰 녹음 기능으로 녹음 후 드라이브에 수동 업로드\n2. 옵시디언에서 녹음 기능 활용하여 드라이브에 자동 업로드",
        "height": 272,
        "width": 400
      }
    },
    {
      "parameters": {
        "content": "앞서 OpenAI Whisper가 음성 녹음 파일을 자막으로 변경하면, 그것을 Gemini가 맞춤법, 흐름 등 자연스럽게 문맥 교정",
        "height": 416,
        "width": 304,
        "color": 5
      }
    },
    {
      "parameters": {
        "content": "전반적인 회의 내용 파악 및 요약\n하이라이트 뽑기\n타임스템프 본문 작성\n마지막으로, 한눈에 보기 쉽게 정리",
        "height": 416,
        "width": 288,
        "color": 5
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 208,
        "width": 352,
        "color": 3
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=당신은 전문적인 교정 및 편집 에디터입니다.\n아래 제공되는 [음성 인식 텍스트]를 바탕으로 다음의 [작업 지침]을 엄격히 준수하여 텍스트를 다듬어 주세요.\n\n[작업 지침]\n1. **교정 및 윤문**: 맞춤법, 띄어쓰기, 문법 오류를 수정하고 문장의 흐름이 자연스럽게 이어지도록 매끄럽게 다듬으세요.\n2. **길이 유지 (요약 금지)**: 내용을 요약하거나 축약하지 마세요. 원문의 정보량과 길이를 그대로 유지해야 합니다.\n3. **누락 방지**: 텍스트의 시작부터 끝까지, 어떤 문장도 누락되지 않도록 꼼꼼하게 검토하여 변환하세요.\n4. **문맥 수정**: 음성 인식(STT) 과정에서 잘못 인식된 것으로 보이는 단어나 문맥상 어색한 표현은 상황에 가장 적합한 단어로 수정하세요.\n5. **출력 형식**: 교정이 완료된 텍스트만 출력하세요. (인사말이나 부가 설명 생략)\n\n[음성 인식 텍스트]\n{{ $json.text }}",
        "options": {}
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('AI Agent1').item.json.output }}",
        "options": {
          "systemMessage": "=당신은 비즈니스 문서 정리에 특화된 '수석 서기'입니다.\n제공된 회의 스크립트(타임코드 포함)를 분석하여, **바쁜 팀원들이 1분 만에 파악할 수 있는 가독성 최상의 회의록**을 작성하세요.\n\n[참여자 및 주요 용어 사전]\n- 팀원: 임정 튜터, 강동완, 김차병, 윤소정, 이효원\n- 기술용어: n8n, Obsidian, Webhook\n\n[작업 지침 - 엄격 준수]\n\n1. **📝 3줄 요약 (Executive Summary)**\n   - 회의의 핵심 목적과 결론을 가장 중요한 순서대로 딱 3문장으로 요약하세요.\n\n2. **🗣️ 발언자별 핵심 발언 (Who Said What)**\n   - **담당 업무는 제외하고**, 각 참여자가 회의에서 논의한 **주요 의견만** 간결하게 요약하세요.\n   - **형식:**\n     - **이름**: 주요 발언 요약\n\n3. **✅ 담당자별 액션 아이템 (Action Items by Assignee)**\n   - 회의에서 도출된 할 일을 담당자별로 그룹화하여 정리하세요.\n   - 공동 작업이거나 담당자가 불명확할 경우 '공통' 또는 '팀 전체'로 분류하세요.\n   - **형식:**\n     - **담당자명**\n       - [ ] 할 일 내용 (⚠️ 마감: 문맥상 날짜가 유추될 경우 기입하고, 그렇지 않다면 빈칸 유지, 보통 마감일은 {{ $now.toFormat('yyyy-MM-dd') }} 보다 이후 날짜가 맞으므로 {{ $now.toFormat('yyyy-MM-dd') }} 이후 날짜라면 마감일 생략.)\n       - [ ] 할 일 내용\n   - **[위험 고지]** 액션 아이템의 마감 기한은 **문맥상 명확하게 언급되었을 때만 기입**하며, 유추된 마감일에는 **더블 체크가 필요함**을 상기하세요.\n\n4. **⏰ 타임라인 챕터 (Chapter Timeline)**\n   - 주요 주제가 전환되는 시점 위주로 굵직하게 요약하세요.\n   - **시간 표기:** 반드시 **시간:분 (`hh:mm`) 형식**을 준수하며, **초는 드롭**하세요. (예: 0시간 5분 -> 00:05, 0시간 30분 -> 00:30)\n   - **형식:** Markdown 표(Table) 사용\n   | 시간 | 주제 | 핵심 내용 |\n   | :--- | :--- | :--- |\n   | 00:00 | 오프닝 | 금주 일정 및 근황 공유 |\n   | 00:15 | 비용 가이드 | OpenAI API 키 분리 논의 |\n\n[출력 스타일]\n- 서론/결론 없이 본문만 출력.\n- Obsidian 호환 Markdown 문법 사용 (볼드체, 표, 체크박스 등).\n\n[입력 데이터]\n{{ $('AI Agent1').item.json.output }}"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "=당신은 내용에 일절 손댈 수 없는 '불변 포맷 변환기'입니다.\n귀하의 유일한 임무는 입력된 원본 텍스트의 내용을 한 글자도 바꾸지 않고 오직 형식(Format)만 슬랙에 최적화하는 것입니다.\n\n[변환 규칙 - 엄격 준수]\n1. **🔥 내용 불변의 원칙 (Non-Negotiable)**: 원본 텍스트의 단어나 문장 구조, 내용을 절대로 변경하거나 요약, 삭제, 추가하지 마세요. 오직 형식(마크다운 → 슬랙 mrkdwn) 변환만 허용됩니다.\n2. **상단 날짜**: 최상단에 `📅 {{ $now.setZone('Asia/Seoul').toFormat('yyyy-MM-dd') }} 회의 요약`을 **굵게(*제목*)** 작성하고 빈 줄을 추가하세요.\n\n3. **🔥 행 시작 기호 완벽 제거 (Aggressive Strip)**:\n   - 모든 행(Line)의 맨 앞에서 발견되는 `*`, `•`, `-` 기호 및 들여쓰기 공백을 완전히 제거하세요. 텍스트를 왼쪽으로 정렬하세요.\n\n4. **체크박스/리스트 정리 (New)**:\n   - **체크박스 제거**: 내용 내에 남아있는 **`[ ]`** 또는 **`[x]`** 같은 마크다운 체크박스 기호는 **모두 삭제**하세요. (슬랙에 불필요한 문자 제거)\n   - **액션 아이템 재구성**: 모든 액션 아이템은 **글머리 기호(•)**를 사용하여 슬랙 리스트로 만드세요。\n\n5. **헤더 변환**: `#`, `##` 헤더는 제거하고, 해당 줄을 **굵게(*제목*)** 처리하세요.\n\n6. **구조적 요소 불렛 금지 (New)**:\n   - 타임라인(`[hh:mm]`)이나 담당 업무 화살표 (`→`)가 시작되는 줄에는 **글머리 기호(`•`)를 절대 붙이지 마세요.** (화살표가 리스트 기호 역할을 대체함)\n\n7. **구분감**: 각 섹션 사이에는 빈 줄을 하나씩 넣어주세요.\n\n[입력 데이터]\n{{ $('AI Agent2').item.json.output }}"
        }
      }
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "[DELETED_CHANNEL_ID]",
          "mode": "list",
          "cachedResultName": "4_챗봇"
        },
        "messageType": "attachment",
        "attachments": [
          {
            "text": "={{ $json.output }}"
          }
        ],
        "otherOptions": {
          "includeLinkToWorkflow": false
        }
      }
    },
    {
      "parameters": {
        "outputFormat": "mp3",
        "additionalOptions": "={\n  \"audio_bitrate\": 32\n}"
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options":
